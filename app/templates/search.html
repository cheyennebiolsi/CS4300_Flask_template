<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
        <link rel="stylesheet" href="/static/bootstrap.min.css">
        <script src="/static/bootstrap-tagsinput.js"></script>
        <link rel="stylesheet" href="/static/bootstrap-tagsinput.css">
        <link rel="stylesheet" href="/static/css/search.css" type="text/css">
        <link rel="icon" type="image/png" sizes="96x96" href="/static/favicon-96x96.png">
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script> -->
        <script src="http://getbootstrap.com/dist/js/bootstrap.min.js"></script>
        <script src="/static/typeahead.bundle.js"></script>
        <script src="/static/bloodhound.js"></script>
    </head>
    <body>
        <div class="header">
            <div class="header-left">
            <p> Prototype 3
            <br> This is a test </br>
            </p>
            
            </div>
            <h1 style="font-size: 85px; font-family:Futura; color:white; text-align:center">Aniai&#24859</h1>
            <form class = "form-inline global-search">
            <div class="form-group" style:"height:30px vertical-align:bottom">
                <input id="input" type="text" name="search" placeholder="Similar anime...">
                    <script>
                        var anime = new Bloodhound({
                            datumTokenizer: Bloodhound.tokenizers.obj.whitespace('anime_english_title'),
                            queryTokenizer: Bloodhound.tokenizers.whitespace,
                            prefetch: {
                                url: '/static/data/anime_info.json'
                            }
                        });
                        anime.initialize();
                        $('input').tagsinput({
                            typeaheadjs: {
                                name: 'anime_info',
                                displayKey: 'anime_english_title',
                                valueKey: 'anime_english_title',
                                source: anime.ttAdapter(),
                                minLength: 3
                            },
                            confirmKeys: [13, 44],
                            maxTags: 5,
                            freeInput: false,
                            delimiter: ','
                        });
                    </script>
            </div>
            <button type = "submit" class="btn btn-info btn-submit">Submit</button>
        </form>
        </div>
<!--
<div style="padding:2%">
{% if data%}
<ul class="list-unstyled">
  {% for d in data[:10] %}
  <li class="media">
    <a class = "media-left media-bottom" href="#">
        <img src={{d["anime_image_url"]}} alt="Generic placeholder image">
    </a>
    <div class="media-body">
      <h5 class="mt-0 mb-1">List-based media object</h5>
      Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis. Fusce condimentum nunc ac nisi vulputate fringilla. Donec lacinia congue felis in faucibus.
    </div>
  </li>
  {% endfor %}
</ul>
{% endif %}
</div> -->

{% if data %}
<div class="media">
    <a class = "media-left media-bottom">
        <img src={{data[0]["anime_image_url"]}} alt = "Anime Image" style = "height:50%">
    </a>
    <div class="media-body" style="height:50%">
        <h5> This is a header </h5>
    </div>
</div>

<div id="cardCarousel" class="carousel slide" date-ride="carousel">
<ol class="carousel-indicators">
   <li data-target="#cardCarousel" data-slide-to="0" class="active"></li>
   <li data-target="#cardCarousel" data-slide-to="1"></li>
   <li data-target="#cardCarousel" data-slide-to="2"></li>
</ol>
<div class = "carousel-inner">
    <div class="carousel-item active">
<!--        <div class="container">
            <div class="row">
                {% for d in data[:8] %}
                <div class="col-sm-3">
                    <div class="card">
                        <img class="card-img-top" src={{d["anime_image_url"]}}>
                    </div>
                 </div>
                {% endfor %}
            </div>
        </div> -->

        <div class="card-group">
        {% for d in data[:6] %}
             <div class="card" text={{d["anime_english_title"]}} anime-index={{d["anime_index"]}}>
                 <img class="card-img-top" src={{d["anime_image_url"]}} data-doc={{d}}>
   <script>
    $(".card").unbind().click(function() {
        var anime_index = $(this).attr('anime-index');
        $.getJSON("/static/data/anime_info.json", function(data) {
             console.log(data[anime_index]);
             var anime_title = data[anime_index].anime_synopsis;

             var anime_image_url = data[anime_index].anime_image_url;
             console.log(anime_title);
 
             console.log("Anime title outside of braces: " + anime_title);
             $(".media").replaceWith(
                '<div class="media">' +
                    '<a class = "media-left media-bottom">' +
                        '<img src = ' + anime_image_url + " alt = 'Anime Image' style = 'height:50%'></a>" +
                     '<h5> ' + anime_title + ' </h5></div>');       });
    }); </script>
             </div>
        {% endfor %}
        </div>
    </div>
    <div class="carousel-item">
        <h1> item2 </h1>
    </div>
    <div class="carousel-item">
        <h1> item3 </h1>
    </div>
</div>

<a class="carousel-control-prev" href="#cardCarousel" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
</a>
<a class="carousel-control-next" href="#cardCarousel" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
</a>
</div>
{% endif %}

<!--    <script>
        $.getJSON("/static/data/anime_info.json", function(data) {
             console.log(data);
             document.getElementById('anime_info').innerHTML = data;
        });
    </script> -->
    </body>
</html>
